@model TMDTLaptop.Models.Class.PhieuNhapKho
@{
    ViewBag.Title = "Chi Tiết Phiếu Nhập Kho";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="container">
    <h2 class="mt-4">@ViewBag.Title</h2>

    <div class="card">
        <div class="card-body">
            <h5>Mã Phiếu Nhập: @Model.MaPhieuNhap</h5>
            <p>Ngày Nhập: @Model.NgayNhap.ToString("dd/MM/yyyy")</p>
            <p>Tổng Tiền: @Model.TongTien.ToString("N0") đ</p>
            <p>Ghi Chú: @Model.GhiChu</p>
            <div class="mt-3">
                <h5>Nhà cung cấp</h5>
                <p class="mb-1"><strong>@(string.IsNullOrWhiteSpace(Model.TenNhaCungCap) ? "Chưa cập nhật" : Model.TenNhaCungCap)</strong></p>
                @if (!string.IsNullOrWhiteSpace(Model.SoDienThoaiNCC) || !string.IsNullOrWhiteSpace(Model.EmailNCC))
                {
                    <p class="mb-0 text-muted">
                        @(string.IsNullOrWhiteSpace(Model.SoDienThoaiNCC) ? "" : "SĐT: " + Model.SoDienThoaiNCC + " ")
                        @(string.IsNullOrWhiteSpace(Model.EmailNCC) ? "" : " | Email: " + Model.EmailNCC)
                    </p>
                }
            </div>

            <h5>Chi Tiết Sản Phẩm:</h5>
            @{
                var chiTiet = ViewBag.ChiTietPhieuNhapKho as List<TMDTLaptop.Models.Class.ChiTietPhieuNhapViewModel>;
            }

            <table class="table">
                <thead>
                    <tr>
                        <th>Tên Sản Phẩm</th>
                        <th>Số Lượng</th>
                        <th>Giá</th>
                        <th>Serial/IMEI</th>
                    </tr>
                </thead>
                <tbody>
                    @if (chiTiet != null)
                    {
                        foreach (var item in chiTiet)
                        {
                            <tr>
                                <td>@item.TenSanPham</td>
                                <td>@item.SoLuong</td>
                                <td>@item.GiaNhap.ToString("N0") đ</td>
                                <td>
                                    @{
                                        if (item.SerialNumbers != null && item.SerialNumbers.Any())
                                        {
                                            foreach (var serial in item.SerialNumbers)
                                            {
                                                <span class="badge bg-light text-dark border me-1">@serial</span>
                                            }
                                        }
                                        else
                                        {
                                            <span class="text-muted">Chưa nhập serial</span>
                                        }
                                    }
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="mt-3">
        <a href="@Url.Action("QuanLyPhieuNhapKho", "Admin")" class="btn btn-secondary">Quay lại</a>
    </div>
</div>
